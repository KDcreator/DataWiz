(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{231:function(e,t,n){e.exports=n(372)},236:function(e,t,n){},237:function(e,t,n){},372:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(183),c=n.n(i),o=(n(236),n(237),n(123)),u=n(11),l=n(16),s=n(184),d=function(e){var t=e.data;return a.a.createElement(s.a,{data:t,variables:[{key:"cpu",type:"linear",min:"auto",max:"auto",ticksPosition:"before",legend:"cpu",legendPosition:"start",legendOffset:20},{key:"traffic",type:"linear",min:"auto",max:"auto",ticksPosition:"before",legend:"traffic",legendPosition:"start",legendOffset:20},{key:"ram",type:"linear",padding:1,min:"auto",max:"auto",legend:"ram",legendPosition:"start",legendOffset:-20},{key:"io",type:"linear",padding:0,min:"auto",max:"auto",legend:"io",legendPosition:"start",legendOffset:-20},{key:"energy",type:"linear",min:"auto",max:"auto",legend:"energy",legendPosition:"start",legendOffset:-20}],lineOpacity:.5,colors:{scheme:"dark2"},margin:{top:50,right:60,bottom:50,left:60},animate:!0,motionStiffness:90,motionDamping:12})},f=n(27),m=n(68);function p(e,t){t=JSON.parse(JSON.stringify(t));return Object.keys(t).forEach((function(n){t[n].forEach((function(r,a){var i={};e.map((function(e,t){i[e]=r[t]})),t[n][a]=i,i={}}))})),t}var g=n(193),h=function(e){var t=e.data,n=e.nodeSize,r=e.dimNames,i=e.scales;return console.log("scatterda scales:",i),a.a.createElement(g.a,{data:t,nodeSize:n,margin:{top:60,right:140,bottom:70,left:90},xScale:{type:"linear",min:i.xScaleMin,max:i.xScaleMax},yScale:{type:"linear",min:i.yScaleMin,max:i.yScaleMax},axisTop:null,axisRight:null,colors:{scheme:"red_blue"},blendMode:"lighten",axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:r[0],legendPosition:"middle",legendOffset:46},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:r[1],legendPosition:"middle",legendOffset:-60},legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:130,translateY:0,itemWidth:100,itemHeight:12,itemsSpacing:5,itemDirection:"left-to-right",symbolSize:12,symbolShape:"circle",effects:[{on:"hover",style:{itemOpacity:1}}]}]})};var v=function(e){var t=Object(r.useState)(null),n=Object(l.a)(t,2),i=n[0],c=n[1],o=Object(r.useRef)(null),s=Object(r.useRef)(null),g=Object(r.useRef)(null),v=Object(r.useRef)(null),y=Object(r.useRef)([0,1]),O=Object(r.useRef)(null),b=Object(r.useRef)(null),S=Object(u.f)().pathname;Object(r.useEffect)((function(){S="/"==S?"/default":S,setInterval((function(){fetch("/dataBroker"+S).then((function(e){return e.json()})).then((function(e){if("string"==typeof e&&e.includes("error")&&e.includes("ResourceNotFound"))throw new Error("ResourceNotFound");var t=JSON.parse(JSON.parse(e));O.current=t.dimensions;var n,r,a=null==o.current?[]:o.current;o.current=E(a,t),t.cluster=(n=t.cluster,r=t.raw_data,n.map((function(e){return r[e]})));var i=p(O.current,t);c(i);var u=JSON.parse(JSON.parse(e));s.current=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(2!==e.length)throw new Error("not 2 dimensional");var a=e[0],i=e[1];n=null==n?{id:"microclusters",data:[]}:n;var c,o=t.cluster.map((function(e){return t.raw_data[e]})),u=o.map((function(e){return e[a]})),l=o.map((function(e){return e[i]})),s=u.length,d=u.reduce((function(e,t){return e+t}),0),f=l.reduce((function(e,t){return e+t}),0),m=d*d+f*f,p=Math.pow(d/s,2),g=Math.pow(f/s,2),h=Math.sqrt(m/s-p),v=Math.sqrt(m/s-g),y=parseInt(Math.max(h,v)),O=parseInt(d/s),b=parseInt(f/s),S=n.data.reduce((function(e,t){return t.radius+e}),0)/n.data.length;n.data.forEach((function(e){return e.normalizedRadius=e.radius/S}));var E=y/(S||y);c={x:O,y:b,radius:y,normalizedRadius:E};var x=n.data.map((function(e){return JSON.stringify(e)})),w=JSON.stringify(c);return-1!==x.indexOf(w)||(n.data.length>=r&&n.data.shift(),n.data.push(c)),n}(y.current,u,s.current),g.current=function(e,t){if(2!==e.length)throw new Error("not 2 dimensional");var n=e[0],r=e[1];if(null==t)return[];var a=t.raw_data,i=a.map((function(e){return e[n]})),c=a.map((function(e){return e[r]})),o=[];return i.map((function(e,t){o.push({x:e,y:c[t]})})),{id:"raw_data",data:o}}(y.current,u),v.current=function(e,t){if(2!==e.length)throw new Error("not 2 dimensional");var n=e[0],r=e[1],a=[];if(null==t)return[];var i=t.all_clusters,c=t.raw_data,o=Array.from(new Set(i)).sort();-1==o[0]&&(o.shift(),o.push(-1));var u,l=Object(f.a)(o);try{for(l.s();!(u=l.n()).done;){var s,d=u.value,m=[],p=0,g=Object(f.a)(i);try{for(g.s();!(s=g.n()).done;){s.value==d&&m.push({x:c[p][n],y:c[p][r]}),p+=1}}catch(v){g.e(v)}finally{g.f()}p=0;var h="";h=0==d?"largest_cluster":-1==d?"noise":d+". cluster",a.push({id:h,data:m})}}catch(v){l.e(v)}finally{l.f()}return a}(y.current,u),b.current=function(e,t){if(2!=t.length)throw new Error("length of dimension must be 2");var n=e.data,r=n.map((function(e){return e.x})),a=n.map((function(e){return e.y})),i=Object(m.mean)(r),c=Object(m.mean)(a),o=Object(m.standardDeviation)(r),u=Object(m.standardDeviation)(a);return{xScaleMin:i-5*o,xScaleMax:i+5*o,yScaleMin:c-5*u,yScaleMax:c+5*u}}(g.current,y.current)}))}),500)}),[]);var E=function(e,t){var n=t.cluster.map((function(e){return t.raw_data[e]}));return e.length>=10?(e.shift(),e.push(n)):e.push(n),e};return null==i||null==s.current||null==b.current?null:a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"category-graph"},a.a.createElement(h,{data:[g.current,s.current],nodeSize:function(e){return void 0!=e.normalizedRadius?40*e.normalizedRadius:9},dimNames:y.current.map((function(e){return O.current[e]})),scales:b.current})),a.a.createElement("div",{className:"category-graph"},a.a.createElement(h,{data:v.current,dimNames:y.current.map((function(e){return O.current[e]})),scales:b.current})),a.a.createElement("div",{className:"choose-dim"},["First Dimension","Second Dimension"].map((function(e,t){return a.a.createElement("div",null,a.a.createElement("span",null,e),a.a.createElement("select",{defaultValue:O.current[t],onChange:function(e){var n=0===t?[O.current.indexOf(e.target.value),y.current[1]]:[y.current[0],O.current.indexOf(e.target.value)];y.current=n,s.current={id:"microclusters",data:[]}}},O.current.map((function(e){return a.a.createElement("option",{value:e}," ",e," ")}))))}))),["raw_data","cluster"].map((function(e){return a.a.createElement("div",{className:"parallel-graphs"},a.a.createElement(d,{data:i[e]}))})))};var y=function(){return a.a.createElement(o.a,null,a.a.createElement(u.c,null,a.a.createElement(u.a,{path:"/"},a.a.createElement(v,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[231,1,2]]]);