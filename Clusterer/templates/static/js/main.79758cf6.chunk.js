(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{399:function(e,t,n){e.exports=n(666)},404:function(e,t,n){},405:function(e,t,n){},666:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(314),o=n.n(i),u=(n(404),n(405),n(203)),c=n(20),l=n(18),s=n(315),d=function(e){var t=e.data;return r.a.createElement(s.a,{data:t,variables:[{key:"cpu",type:"linear",min:"auto",max:"auto",ticksPosition:"before",legend:"cpu",legendPosition:"start",legendOffset:20},{key:"traffic",type:"linear",min:"auto",max:"auto",ticksPosition:"before",legend:"traffic",legendPosition:"start",legendOffset:20},{key:"ram",type:"linear",padding:1,min:"auto",max:"auto",legend:"ram",legendPosition:"start",legendOffset:-20},{key:"io",type:"linear",padding:0,min:"auto",max:"auto",legend:"io",legendPosition:"start",legendOffset:-20},{key:"energy",type:"linear",min:"auto",max:"auto",legend:"energy",legendPosition:"start",legendOffset:-20}],lineOpacity:.5,colors:{scheme:"dark2"},margin:{top:50,right:60,bottom:50,left:60},animate:!0,motionStiffness:90,motionDamping:12})},f=n(29);function m(e,t){t=JSON.parse(JSON.stringify(t));return Object.keys(t).forEach((function(n){t[n].forEach((function(a,r){var i={};e.map((function(e,t){i[e]=a[t]})),t[n][r]=i,i={}}))})),t}var p=n(323),g=function(e){var t=e.data,n=e.nodeSize,a=e.dimNames;return r.a.createElement(p.a,{data:t,nodeSize:n,margin:{top:60,right:140,bottom:70,left:90},xScale:{type:"linear",min:-100,max:120},yScale:{type:"linear",min:-100,max:120},axisTop:null,axisRight:null,colors:{scheme:"red_blue"},blendMode:"lighten",axisBottom:{orient:"bottom",tickSize:5,tickPadding:5,tickRotation:0,legend:a[0],legendPosition:"middle",legendOffset:46},axisLeft:{orient:"left",tickSize:5,tickPadding:5,tickRotation:0,legend:a[1],legendPosition:"middle",legendOffset:-60},legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:130,translateY:0,itemWidth:100,itemHeight:12,itemsSpacing:5,itemDirection:"left-to-right",symbolSize:12,symbolShape:"circle",effects:[{on:"hover",style:{itemOpacity:1}}]}]})};var h=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),i=n[0],o=n[1],u=Object(a.useRef)(null),s=Object(a.useRef)(null),p=Object(a.useRef)(null),h=Object(a.useRef)(null),v=Object(a.useRef)([0,1]),y=["cpu","traffic","ram","io","energy"],O=Object(c.f)().pathname;Object(a.useEffect)((function(){O="/"==O?"/default":O,setInterval((function(){fetch("/dataBroker"+O).then((function(e){return e.json()})).then((function(e){if("string"==typeof e&&e.includes("error")&&e.includes("ResourceNotFound"))throw new Error("ResourceNotFound");var t,n,a=JSON.parse(JSON.parse(e)),r=null==u.current?[]:u.current;u.current=E(r,a),a.cluster=(t=a.cluster,n=a.raw_data,t.map((function(e){return n[e]}))),o(m(y,a));var i=JSON.parse(JSON.parse(e));s.current=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(2!==e.length)throw new Error("not 2 dimensional");var r=e[0],i=e[1];n=null==n?{id:"microclusters",data:[]}:n;var o,u=t.cluster.map((function(e){return t.raw_data[e]})),c=u.map((function(e){return e[r]})),l=u.map((function(e){return e[i]})),s=c.length,d=c.reduce((function(e,t){return e+t}),0),f=l.reduce((function(e,t){return e+t}),0),m=d*d+f*f,p=Math.pow(d/s,2),g=Math.pow(f/s,2),h=Math.sqrt(m/s-p),v=Math.sqrt(m/s-g),y=parseInt(Math.max(h,v)),O=parseInt(d/s),E=parseInt(f/s),w=n.data.reduce((function(e,t){return t.radius+e}),0)/n.data.length;n.data.forEach((function(e){return e.normalizedRadius=e.radius/w}));var b=y/(w||y);o={x:O,y:E,radius:y,normalizedRadius:b};var S=n.data.map((function(e){return JSON.stringify(e)})),k=JSON.stringify(o);return-1!==S.indexOf(k)||(n.data.length>=a&&n.data.shift(),n.data.push(o)),n}(v.current,i,s.current),p.current=function(e,t){if(2!==e.length)throw new Error("not 2 dimensional");var n=e[0],a=e[1];if(null==t)return[];var r=t.raw_data,i=r.map((function(e){return e[n]})),o=r.map((function(e){return e[a]})),u=[];return i.map((function(e,t){u.push({x:e,y:o[t]})})),{id:"raw_data",data:u}}(v.current,i),h.current=function(e,t){if(2!==e.length)throw new Error("not 2 dimensional");var n=e[0],a=e[1],r=[];if(null==t)return[];var i=t.all_clusters,o=t.raw_data,u=Array.from(new Set(i)).sort();-1==u[0]&&(u.shift(),u.push(-1));var c,l=Object(f.a)(u);try{for(l.s();!(c=l.n()).done;){var s,d=c.value,m=[],p=0,g=Object(f.a)(i);try{for(g.s();!(s=g.n()).done;){s.value==d&&m.push({x:o[p][n],y:o[p][a]}),p+=1}}catch(v){g.e(v)}finally{g.f()}p=0;var h="";h=0==d?"largest_cluster":-1==d?"noise":d+". cluster",r.push({id:h,data:m})}}catch(v){l.e(v)}finally{l.f()}return r}(v.current,i)}))}),500)}),[]);var E=function(e,t){var n=t.cluster.map((function(e){return t.raw_data[e]}));return e.length>=10?(e.shift(),e.push(n)):e.push(n),e};return null==i||null==s.current?null:r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"category-graph"},r.a.createElement(g,{data:[p.current,s.current],nodeSize:function(e){return void 0!=e.normalizedRadius?40*e.normalizedRadius:9},dimNames:v.current.map((function(e){return y[e]}))})),r.a.createElement("div",{className:"category-graph"},r.a.createElement(g,{data:h.current,dimNames:v.current.map((function(e){return y[e]}))})),r.a.createElement("div",{className:"choose-dim"},["First Dimension","Second Dimension"].map((function(e,t){return r.a.createElement("div",null,r.a.createElement("span",null,e),r.a.createElement("select",{defaultValue:y[t],onChange:function(e){var n=0===t?[y.indexOf(e.target.value),v.current[1]]:[v.current[0],y.indexOf(e.target.value)];v.current=n,s.current={id:"microclusters",data:[]}}},y.map((function(e){return r.a.createElement("option",{value:e}," ",e," ")}))))}))),["raw_data","cluster"].map((function(e){return r.a.createElement("div",{className:"parallel-graphs"},r.a.createElement(d,{data:i[e]}))})))};var v=function(){return r.a.createElement(u.a,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/"},r.a.createElement(h,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[399,1,2]]]);